region: "0"

common_os_support: ["CentOS","Amazon","Ubuntu"]


apache_certbot: True
apache_appname: "magento"
apache_vhost_mode: "www"

nginx_certbot: True
nginx_appname: "magento"
nginx_vhost_mode: "www"

elasticsearch_version: "7.9"
elasticsearch_clurname: "magento"

mysql_remote: True
mysql_version: "8.0"       
mysql_root_password: "123456"

redis_version: "6.0"

varnish_version: "6.4"

php_getcomposer_url: "https://getcomposer.org/composer-2.phar"
php_version: "7.4"
php_configuration_extras:
  - name: memory_limit
    value: "-1"
    
init_application:
  magento:
    username: admin
    password: "123456"
    commands:
      - ip=`curl ifconfig.me`
      - sudo /data/wwwroot/magento/bin/magento setup:install --base-url=http://$ip --db-host=localhost --db-name=magento --db-user=magento --db-password=$new_password --admin-firstname=admin --admin-lastname=admin --admin-email=help@websoft9.com --admin-user=admin --admin-password=$new_password --language=en_US --currency=USD --timezone=America/Chicago --use-rewrites=1 --search-engine=elasticsearch7 --elasticsearch-host=$ip --elasticsearch-port=9200
      - sudo /data/wwwroot/magento/bin/magento setup:config:set --backend-frontname=admin -n
      - sudo php /data/wwwroot/magento/bin/magento module:disable Magento_TwoFactorAuth
      - sudo /data/wwwroot/magento/bin/magento indexer:reindex
    
docker_applications: 
  - phpmyadmin

mysql_databases:
 - name: magento
 
mysql_users:
 - name: magento
   priv: '*.*:ALL'

# init all users password for MySQL
init_db: 
  mysql:
    admin: root
    users: ["magento"]
    password: "123456"
